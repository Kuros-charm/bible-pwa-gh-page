(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();const g="modulepreload",w=function(f){return"/bible-pwa-gh-page/"+f},h={},y=function(i,a,c){let t=Promise.resolve();if(a&&a.length>0){let o=function(s){return Promise.all(s.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),d=n?.nonce||n?.getAttribute("nonce");t=o(a.map(s=>{if(s=w(s),s in h)return;h[s]=!0;const l=s.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${p}`))return;const e=document.createElement("link");if(e.rel=l?"stylesheet":g,l||(e.as="script"),e.crossOrigin="",e.href=s,d&&e.setAttribute("nonce",d),document.head.appendChild(e),l)return new Promise((m,u)=>{e.addEventListener("load",m),e.addEventListener("error",()=>u(Error(`Unable to preload CSS for ${s}`)))})}))}function r(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return t.then(o=>{for(const n of o||[])n.status==="rejected"&&r(n.reason);return i().catch(r)})};function v(f={}){const{immediate:i=!1,onNeedRefresh:a,onOfflineReady:c,onRegistered:t,onRegisteredSW:r,onRegisterError:o}=f;let n,d,s;const l=async(e=!0)=>{await d,s?.()};async function p(){if("serviceWorker"in navigator){if(n=await y(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/bible-pwa-gh-page/sw.js",{scope:"/bible-pwa-gh-page/",type:"classic"})).catch(e=>{o?.(e)}),!n)return;s=()=>{n?.messageSkipWaiting()};{let e=!1;const m=()=>{e=!0,n?.addEventListener("controlling",u=>{u.isUpdate&&window.location.reload()}),a?.()};n.addEventListener("installed",u=>{typeof u.isUpdate>"u"?typeof u.isExternal<"u"&&u.isExternal?m():!e&&c?.():u.isUpdate||c?.()}),n.addEventListener("waiting",m)}n.register({immediate:i}).then(e=>{r?r("/bible-pwa-gh-page/sw.js",e):t?.(e)}).catch(e=>{o?.(e)})}}return d=p(),l}function E(f){const i=f.querySelector("#pwa-toast"),a=i.querySelector("#toast-message"),c=i.querySelector("#pwa-close"),t=i.querySelector("#pwa-refresh");let r;const o=()=>r?.(!0);function n(s){if(s){requestAnimationFrame(()=>n(!1));return}t.removeEventListener("click",o),i.classList.add("hidden")}function d(s){s||t.addEventListener("click",o),requestAnimationFrame(()=>{i.classList.remove("hidden")})}window.addEventListener("load",()=>{c.addEventListener("click",()=>n(!0)),r=v({immediate:!0,onOfflineReady(){a.innerHTML="已可離線使用",d(!0)},onNeedRefresh(){a.innerHTML="有新版本可用，請點擊重新載入",d(!1)},onRegisteredSW(s,l){}})})}const L=document.querySelector("#app");E(L);
